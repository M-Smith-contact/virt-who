.TH VIRT-WHO-CONFIG "5" "June 2014" "virt-who"
.SH NAME
virt-who-config - configuration for virt-who
.SH SYNOPISIS
/etc/virt-who.d/*
.SH DESCRIPTION
Configuration format is ini-like, where group name (in square brackets) is arbitrary name of the configuration.

Only required key is \fBtype\fR that has to have one of the allowed virtualization backend names, see virt-who(8).

Other options that can be supplied are:
.TP
\fBserver\fR
Hostname, IP address or URL of the server that provides virtualization information (not applicable for vdsm mode).
.TP
\fBusername\fR
Username for authentication to the server (not applicable for vdsm mode).
.TP
\fBpassword\fR
Password for authentication to the server (not applicable for vdsm mode).
.TP
\fBencrypted_password\fR
Alternative to the password option, encrypted password that is generated by virt-who-password(8) utility.
.TP
\fBowner\fR
Owner for use with Subscription Asset Manager, the Red Hat Customer Portal, or Satellite 6 (not applicable for Satellite 5)
.TP
\fBenv\fR
Environment for use with Subscription Asset Manager or Satellite 6 (not applicable for Satellite 5)
.TP
\fBrhsm_username\fR
Optional username to use to communicate with Subscription Asset Manager or Satellite 6 instead of the registered system's identity certificate. (not applicable for Satellite 5)
.TP
\fBrhsm_password\fR
Optional password to use to communicate with Subscription Asset Manager or Satellite 6 instead of the registered system's identity certificate. (not applicable for Satellite 5)
.TP
\fBrhsm_encrypted_password\fR
Alternative to the rhsm_password option, encrypted password that is generated by virt-who-password(8) utility.
.TP
\fBrhsm_hostname\fR
Optional hostname of the Subscription Asset Manager or Satellite 6 server to use in place of the host defined in the system's rhsm.conf.
.TP
\fBrhsm_port\fR
Optional port for the Subscription Asset Manager or Satellite 6 server to use in place of the port defined in the system's rhsm.conf.
.TP
\fBrhsm_prefix\fR
Optional prefix for the Subscription Asset Manager or Satellite 6 server to use in place of the prefix defined in the system's rhsm.conf.
.TP
\fBrhsm_proxy_hostname\fR
Optional proxy host name for the Subscription Asset Manager or Satellite 6 server to use in place of the proxy host name defined in the system's rhsm.conf.
.TP
\fBrhsm_proxy_port\fR
Optional proxy port for the Subscription Asset Manager or Satellite 6 server to use in place of the proxy port defined in the system's rhsm.conf.
.TP
\fBrhsm_proxy_user\fR
Optional proxy username for the Subscription Asset Manager or Satellite 6 server to use in place of the proxy username defined in the system's rhsm.conf.
.TP
\fBrhsm_proxy_password\fR
Optional proxy password for the Subscription Asset Manager or Satellite 6 server to use in place of the proxy password defined in the system's rhsm.conf.
.TP
\fBrhsm_encrypted_proxy_password\fR
Alternative to the rhsm_proxy_password option; encrypted password generated by the virt-who-password(8) utility.
.TP
\fBfilter_host_uuids\fR
Only hosts which uuid is specified in comma-separated list in this option will be reported. Put the uuid into the double-quotes if it contains special characters (like comma).
.TP
\fBexclude_host_uuids\fR
Hosts which uuid is specified in comma-separated list in this option will \fBNOT\fR be reported. Put the uuid into the double-quotes if it contains special characters (like comma).
.TP
\fBhypervisor_id\fR
Property that should be used as identification of the hypervisor. Can be one of following: \fBuuid\fR, \fBhostname\fR, \fBhwuuid\fR. Note that some virtualization backends don't have all of them implemented. Default is \fBuuid\fR. Applicable to esx, hyperv and rhevm only. This property is meant to be set up before initial run of virt-who. Changing it later will result in duplicated entries in the subscription manager.

.SH EXAMPLE
[test-esx]
.br
type=esx
.br
server=1.2.3.4
.br
username=admin
.br
password=password
.br
owner=test
.br
env=staging
.br
rhsm_username=admin
.br
rhsm_password=password

.SH BACKEND SPECIFIC OPTIONS

.SS ESX BACKEND

.TP
\fBfilter_host_parents\fR
Only hosts which parent (usually ComputeResource) name is specified in comma-separated list in this option will be reported. Put the name into the double-quotes if it contains special characters (like comma).
.TP
\fBexclude_host_parents\fR
Hosts which parent (usually ComputeResource) name is specified in comma-separated list in this option will \fBNOT\fR be reported. Put the name into the double-quotes if it contains special characters (like comma).
.TP
\fBsimplified_vim\fR
virt-who by default uses stripped-down version of vimService.wsdl file that contains vSphere SOAP API definition. Set this option to \fBfalse\fR to use server provided wsdl file that will be retrieved automatically.

.SS RHEV-M BACKEND

.TP
\fBserver\fR
The default port number is 8443 (that was used the default in RHEV-M <= 3.0). Newer RHEV-M installations uses port 443 by default. Use correct value for your server in format:

server=<HOSTNAME_OR_IP_ADDRESS>:<PORT_NUMBER>

.SS FAKE BACKEND

Fake backend reads host/guests associations from the file on disk, for example:

[fake-virt]
.br
type=fake
.br
file=/path/to/json
.br
is_hypervisor=True
.br

.TP
\fBtype\fR
Must be always \fBfake\fR.

.TP
\fBis_hypervisor\fR
If \fbtrue\fR (default), the option determines that the fake data are fetched from multihost environment.

.TP
\fBfile\fR
Absolute path to the JSON file that has the same structure as file returned from \fBvirt-who --print\fR command, for example:
.br
{
    "hypervisors": [
.br
        {
.br
            "uuid": "7e98b6ea-0af1-4afa-b846-919549bb0fe2",
.br
            "guests": [
.br
                {
.br
                    "guestId": "8ae19f08-2605-b476-d42e-4bd5a39f466c"
.br
                },
.br
                ...
.br
            ]
.br
        },
.br
        ...
.br
    ]
.br
}

.SH AUTHOR
Radek Novacek <rnovacek at redhat dot com>

.SH SEE ALSO
virt-who(8), virt-who-password(8)
